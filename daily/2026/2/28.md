## 2026-02-28

### EKSマネージドのCoreDNSのバージョン確認
> aws eks describe-addon --cluster-name my-cluster --addon-name coredns --query addon.addonVersion --output text

このコマンドはセルフマネージドアドオンのバージョンを確認できることができません。


### EKSセルフマネージドのCoreDNSのバージョン確認

> kubectl describe deployment coredns -n kube-system | grep Image | cut -d ":" -f 3

[CoreDNS Amazon EKS セルフマネージドアドオンを更新する](https://docs.aws.amazon.com/ja_jp/eks/latest/userguide/coredns-add-on-self-managed-update.html)


### CDKを利用して感じたメリット

CloudFormationでは、リソース同士を結びつけるために !Ref や Fn::GetAtt を利用して依存関係を記述する必要があります。

CDKは、TypeScriptなどのコード上でオブジェクトを変数として渡すだけで、その裏側の依存関係（DependsOn）を自動で生成してくれるので記述が楽です。

スタックの削除もCDKを利用することが楽でした。

cdkでスタックを削除する際、cdk destroy <スタック名>を実行するだけでリソースを削除してくれます。依存関係のあるスタックも自動的に小スタックから削除するため、リソースの削除作業が楽になります。

学習用のAWSアカウントの運用時にcdk を利用する際にcdkを利用すると利用するときにだけスタックを作成や学習が終わったら削除するなどコマンド一つで実施可能のため、コスト効率が良くなります。


※ データを格納したS3バケットは削除できません。この場合は、事前にデータ削除後、cdk destoroyする必要があります。